# Image rendering, converting, and pixelization are taken from https://www.reddit.com/r/unixporn/comments/3358vu/i3lock_unixpornworthy_lock_screen/. Credits to user `Babel2`.

#!/bin/bash

# Get keyboard layout code
case "$(xset -q|grep LED| awk '{ print $10 }')" in
    "00000002") KB_LANG="eng";; # English
    "00001002") KB_LANG="bg";; # Other
esac

IMAGE=/tmp/lockscreen.png
TEXT=/tmp/locktext.png
ICON=$HOME/.config/i3/spaceship.png
LANG=/tmp/lang.png

scrot $IMAGE
convert $IMAGE -scale 40% -scale 1000% -fill black -colorize 25% $IMAGE
convert $IMAGE $ICON -gravity center -composite -matte $IMAGE

i3lock -n -u -i $IMAGE
